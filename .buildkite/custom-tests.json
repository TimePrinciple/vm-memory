{
  "tests": [
    {
      "test_name": "build-gnu-mmap",
      "command": "XEN=ENABLE cargo build --release",
      "platform": ["x86_64", "aarch64"]
    },
    {
      "test_name": "build-gnu-mmap-no-xen",
      "command": "cargo build --release --features=backend-mmap",
      "platform": ["x86_64", "aarch64"]
    },
    {
      "test_name": "build-musl-mmap",
      "command": "XEN=ENABLE cargo build --release --target {target_platform}-unknown-linux-musl",
      "platform": ["x86_64", "aarch64"]
    },
    {
      "test_name": "build-musl-mmap-no-xen",
      "command": "cargo build --release --features=backend-mmap --target {target_platform}-unknown-linux-musl",
      "platform": ["x86_64", "aarch64"]
    },
    {
      "test_name": "miri",
      "command": "RUST_BACKTRACE=1 MIRIFLAGS='-Zmiri-disable-isolation -Zmiri-panic-on-unsupported -Zmiri-backtrace=full' cargo +nightly miri test --features backend-mmap",
      "platform": ["x86_64", "aarch64"]
    },
    {
      "test_name": "unittests-gnu-xen",
      "command": "XEN=ENABLE cargo test --workspace",
      "platform": [
        "x86_64",
        "aarch64"
      ]
    },
    {
      "test_name": "unittests-musl-xen",
      "command": "XEN=ENABLE cargo test --workspace --target {target_platform}-unknown-linux-musl",
      "platform": [
        "x86_64",
        "aarch64"
      ]
    },
    {
      "test_name": "clippy-xen",
      "command": "XEN=ENABLE cargo clippy --workspace --bins --examples --benches --all-targets -- -D warnings -D clippy::undocumented_unsafe_blocks",
      "platform": [
        "x86_64",
        "aarch64"
      ]
    },
    {
      "test_name": "check-warnings-xen",
      "command": "RUSTFLAGS=\"-D warnings\" XEN=ENABLE cargo check --all-targets  --features 'backend-bitmap backend-mmap backend-atomic' --workspace",
      "platform": [
        "x86_64",
        "aarch64"
      ]
    }
  ]
}
